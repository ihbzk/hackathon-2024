<!DOCTYPE html>
<html lang="en">
    <head>
        <style>
            body {
                background-color: white;
            }
            #radio-selection {
                display: flex;
                flex-direction: column;
            }

        </style>
        <script src="https://play.workadventu.re/iframe_api.js"></script>
    </head>

    <body>
        <div>
            
            <script>
                var audio = new Audio();
                var coWebSite = undefined;

            WA.player.state.onVariableChange('radio').subscribe((url) => {
                console.log('Radio changed controller', url);
                audio.src = url;
                audio.play();
                console.log('coWebSite', coWebSite);

            });

    

            WA.player.state.onVariableChange('radio_can_play').subscribe((bool) => {
                console.log('Radio playing', bool);
                if (bool){
                    WA.ui.actionBar.addButton({
                    id: 'radio-play-btn',
                    type: 'action',
                    imageSrc: 'http://localhost:5173/images/play-solid.svg',
                    toolTip: 'Play',
                    callback: (event) => {
                        console.log('Button clicked', event);
                    
                        // When a user clicks on the action bar button 'Register', we remove it.
                        WA.ui.actionBar.removeButton('radio-play-btn');
                        audio.play();
                    }
                });
                } else {
                    audio.pause();
                }
            });

            radioButton();

            function radioButton(){
                console.log('radioButton');
                WA.ui.actionBar.addButton({
                    id: 'radio-btn',
                    type: 'action',
                    imageSrc: 'http://localhost:5173/images/radio-solid.svg',
                    toolTip: 'Radio',
                    callback: async (event) => {
                        console.log('Button clicked', event);
                        coWebsite = await WA.nav.openCoWebSite('http://localhost:5173/radioEveryWhere.html', true);
                    
                        // When a user clicks on the action bar button 'Register', we remove it.
                        WA.ui.actionBar.removeButton('radio-btn');
                    }
                });
            }

        
            </script>

        </div>
    </body>
</html>